{
    "homepage": "https://developer.nvidia.com/rdp/cudnn-download",
    "description": "NVIDIA CUDA Deep Neural Network (cuDNN) is a GPU-accelerated library of primitives for deep neural networks.",
    "version": "8.0.4.30",
    "architecture": {
        "64bit": {
            "url": "http://developer.download.nvidia.com/compute/redist/cudnn/v8.0.4/cudnn-10.2-windows10-x64-v8.0.4.30.zip",
            "hash": "45dc48f6c19d62e4e4f56da216b72cf69454db374ffb6589aca0cf7c309762fa"
        }
    },
    "extract_dir": "cuda",
    "depends": [
        "cuda",
        "sudo"
    ],
    "installer": {
        "script": "sudo Copy-Item -LiteralPath (Get-ChildItem -LiteralPath $dir) -Destination $env:CUDA_PATH -Recurse -Force"
    },
    "uninstaller": {
        "script": [
            "$cudnnFiles = Get-ChildItem -LiteralPath $env:CUDA_PATH -File -Recurse | Where-Object {",
            "  $_.Name -like 'cudnn64.*.dll' -or",
            "  $_.Name -like 'cudnn.h' -or",
            "  $_.Name -like 'cudnn.lib'",
            "}",
            "sudo Remove-Item -LiteralPath $cudnnFiles -Force"
        ]
    },
    "checkver": {
        "url": "https://developer.nvidia.com/rdp/cudnn-archive",
        "regex": "cudnn-(?<cudaversion>[\\d.]+)-windows10-x64-v([\\d.]+)\\.zip"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "http://developer.download.nvidia.com/compute/redist/cudnn/v$matchHead/cudnn-$matchCudaversion-windows10-x64-v$version.zip",
                "hash": {
                    "url": "$url.sha256"
                }
            }
        }
    }
}
